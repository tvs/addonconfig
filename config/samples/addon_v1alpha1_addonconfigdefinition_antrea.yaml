apiVersion: addon.tvs.io/v1alpha1
kind: AddonConfigDefinition
metadata:
  name: antrea
spec:
  schema:
    openAPIV3Schema:
      type: object
      properties:
        trafficEncapMode:
          type: string
        noSNAT:
         type: boolean
        disableUdpTunnelOffload:
          type: boolean
        defaultMTU:
          type: string
        tlsCipherSuites:
          type: string
        featureGates:
          type: object
          properties:
            AntreaProxy:
              type: boolean
              default: true
            EndpointSlice:
              type: boolean
              default: false
            AntreaPolicy:
              type: boolean
              default: true
            FlowExporter:
              type: boolean
              default: false
            Egress:
              type: boolean
              default: false
            NodePortLocal:
              type: boolean
              default: false
            AntreaTraceflow:
              type: boolean
              default: true
            NetworkPolicyStats:
              type: boolean
              default: false
  template: |
    antrea:
      config:
        trafficEncapMode: {{.trafficEncapMode}}
        noSNAT: {{.noSNAT}}
        disableUdpTunnelOffload: {{.disableUdpTunnelOffload}}
        defaultMTU: {{.defaultMTU}}
        tlsCipherSuites: {{.tlsCipherSuites}}
        featureGates:
          AntreaProxy: {{.featureGates.AntreaProxy}}
          EndpointSlice: {{.featureGates.EndpointSlice}}
          AntreaPolicy: {{.featureGates.AntreaPolicy}}
          FlowExporter: {{.featureGates.FlowExporter}}
          Egress: {{.featureGates.Egress}}
          NodePortLocal: {{.featureGates.NodePortLocal}}
          AntreaTraceflow: {{.featureGates.AntreaTraceflow}}
          NetworkPolicyStats: {{.featureGates.NetworkPolicyStats}}
